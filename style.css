:root{
  /* Light theme variables */
  --bg: #f7f9fb;
  --card: #ffffff;
  --muted: #6a7178;
  --border: #e6edf6;
  --accent: #2b7be4;      /* overridden by palette */
  --accent-600: #1a5fc1;  /* generated darker */
  --radius: 14px;
  --max-width: 980px;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono", monospace;
  --ui: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --shadow-1: 0 6px 18px rgba(20,30,50,0.06);
  --shadow-2: 0 12px 32px rgba(10,20,40,0.08);
  --text: #0f1720;
}

/* Improved Dark theme colors — softer, warmer blue accents, balanced surfaces */
:root[data-theme="dark"], html[data-theme="dark"] {
  --bg: #0b1220;               /* deep navy */
  --card: #0f1726;             /* card slightly lighter than background */
  --muted: #94a3b8;            /* softer muted */
  --border: rgba(255,255,255,0.04);
  --text: #e6eef8;
  --accent-600: #1a5fc1;       /* keep accent-600, will be updated by JS if needed */
}

/* Reset & base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--ui);
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:28px;
  line-height:1.45;
  font-size:15px;
}

/* container */
.container{ max-width:var(--max-width); margin:0 auto; padding:6px; }

/* header */
.site-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; margin-bottom:14px;
}
.header-left{ display:flex; align-items:center; gap:12px; }
.title{ font-size:20px; margin:0; font-weight:600; color:var(--text); }

/* header controls */
.header-controls{ display:flex; align-items:center; gap:8px; position:relative; }
.icon-btn{
  background:transparent; border:none; padding:8px; border-radius:10px; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center; color:var(--text);
}
.icon-btn:hover{ background: rgba(255,255,255,0.02); }

/* palette popover */
.palette-popover{
  display:none;
  position:absolute;
  margin-top:8px;
  right:8px;
  background:var(--card);
  border:1px solid var(--border);
  padding:10px;
  border-radius:10px;
  box-shadow: 0 18px 40px rgba(2,6,23,0.08);
  z-index:40;
}
.palette-popover.open{ display:block; }
.palette-presets{ display:flex; gap:8px; margin-bottom:8px; }
.swatch{
  width:28px; height:28px; border-radius:8px; border:1px solid rgba(0,0,0,0.06);
  cursor:pointer; padding:0; overflow:hidden; position:relative;
}
.swatch.active{ box-shadow:0 6px 18px rgba(0,0,0,0.12); outline:3px solid rgba(255,255,255,0.06); transform:scale(1.04); }
.palette-custom{ display:flex; gap:8px; align-items:center; }
.palette-custom input[type="color"]{ width:36px; height:28px; padding:0; border:none; background:transparent; cursor:pointer; }
.palette-actions{ margin-top:8px; display:flex; gap:8px; justify-content:flex-end; }

/* panel */
.panel{
  background:var(--card);
  padding:20px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  box-shadow:var(--shadow-1);
  transition:box-shadow 220ms ease, background 260ms ease;
}

/* converted highlight — applies white-only in light theme */
/* make highlight without forcing white in dark theme */
:root:not([data-theme="dark"]) .panel.converted textarea{
  background: #ffffff !important;
  color: #0b1720 !important;
  box-shadow: 0 14px 40px rgba(43,123,228,0.12);
}
.panel.converted{ animation:panel-highlight 780ms cubic-bezier(.2,.9,.2,1); }
@keyframes panel-highlight{
  0%{ box-shadow:0 6px 18px rgba(20,30,50,0.06); background:linear-gradient(180deg,#fff,#fff); }
  30%{ box-shadow:0 22px 48px rgba(43,123,228,0.12); background:linear-gradient(180deg,#fbfdff,#fff); }
  100%{ box-shadow:var(--shadow-1); background:var(--card); }
}

/* layout blocks vertical */
.block{ display:block; margin-bottom:8px; }
.input-block, .output-block{ width:100%; }

/* label & fields */
.small{ font-size:13px; color:var(--muted); display:block; margin-bottom:8px; }
.field-label{ display:inline-block; border-left:3px solid rgba(43,123,228,0.10); padding-left:11px; border-radius:4px; color:var(--muted); font-weight:600; line-height:1.4; }

/* fixed textareas (no resize) and improved dark theme backgrounds */
textarea{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #d6e3f5;
  resize:none;
  font-family:var(--mono);
  font-size:14px;
  line-height:1.5;
  background: linear-gradient(180deg,#fff,#fbfdff);
  transition: box-shadow 180ms ease, border-color 180ms ease;
  color:var(--text);
  outline:none;
}
:root[data-theme="dark"] textarea{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.04);
}
textarea::placeholder{ color: #9aa6b3; }
textarea:focus{ border-color:var(--accent); box-shadow:0 8px 26px rgba(43,123,228,0.08); }

/* set heights for input/output */
.input-block textarea{ min-height:220px; max-height:320px; }
.output-block textarea{ min-height:220px; max-height:420px; }

/* divider */
.divider{ border:none; height:1px; background:var(--border); margin:14px 0; border-radius:2px; }

/* controls row layout */
.controls-row{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:12px; }
.controls-left{ display:flex; gap:12px; align-items:center; }
.controls-right{ display:flex; gap:12px; align-items:center; }

/* buttons */
button{ display:inline-flex; align-items:center; justify-content:center; gap:8px; background:var(--accent); color:#fff; border:none; padding:10px 16px; border-radius:12px; cursor:pointer; font-weight:600; font-size:14px; transition: transform 160ms cubic-bezier(.2,.9,.2,1), box-shadow 160ms ease, background 160ms ease; box-shadow: 0 8px 20px rgba(43,123,228,0.12); flex:0 0 auto; }
button:hover{ transform:translateY(-3px) scale(1.01); box-shadow:0 20px 36px rgba(20,30,60,0.10); }
button:active{ transform:translateY(-1px) scale(0.997); }
button.ghost{ background:transparent; border:1px solid #d6e3f5; color:var(--text); box-shadow:none; padding:8px 12px; }
button.ghost:hover{ background: rgba(43,123,228,0.03); }

/* icons */
.btn-icon{ display:inline-flex; width:18px; height:18px; align-items:center; justify-content:center; opacity:0.98; }
.btn-icon svg{ display:block; width:100%; height:100%; stroke:currentColor; fill:none; }

/* badge */
.badge{ display:inline-block; min-width:20px; height:20px; line-height:20px; padding:0 6px; margin-left:8px; background:var(--accent-600); color:white; font-size:12px; font-weight:700; border-radius:999px; box-shadow:0 6px 18px rgba(0,0,0,0.08); transform:translateY(-1px); opacity:0; transition:opacity 220ms ease, transform 220ms ease; }
.badge.visible{ opacity:1; transform:translateY(0); }

/* copy button state */
button.copied{ background: linear-gradient(90deg,#16a34a,#10b981); box-shadow:0 12px 34px rgba(10,90,50,0.12); transform:translateY(-2px); }

/* convert success */
button.success{ background: linear-gradient(90deg,#16a34a,#0ea56a); color:#fff; box-shadow:0 18px 40px rgba(12,80,40,0.18); }
button.success::after{ content:'✓'; margin-left:8px; font-weight:700; }

/* tooltip for convert only */
button[data-tooltip]{ position:relative; }
button[data-tooltip]::after{
  content: attr(data-tooltip);
  position:absolute; bottom: calc(100% + 10px); left:50%; transform:translateX(-50%) translateY(6px);
  background:#0b1a2b; color:white; font-size:12px; padding:6px 8px; border-radius:8px; white-space:nowrap; opacity:0; pointer-events:none; transition:opacity 160ms ease, transform 160ms ease; box-shadow:0 8px 20px rgba(2,6,23,0.4); z-index:30;
}
button[data-tooltip]::before{ content:''; position:absolute; bottom: calc(100% + 2px); left:50%; transform:translateX(-50%); border:6px solid transparent; border-top-color: #0b1a2b; opacity:0; pointer-events:none; transition:opacity 160ms ease; z-index:30; }
button[data-tooltip]:hover::after, button[data-tooltip]:focus::after{ opacity:1; transform:translateX(-50%) translateY(0); }
button[data-tooltip]:hover::before, button[data-tooltip]:focus::before{ opacity:1; }

/* modal */
.modal{ display:none; position:fixed; inset:0; background:rgba(6,12,22,0.45); justify-content:center; align-items:center; z-index:1200; padding:20px; }
.modal.animated{ opacity:0; transform:translateY(-12px) scale(0.997); transition:opacity 220ms ease, transform 220ms ease; }
.modal.animated.show{ display:flex; opacity:1; transform:translateY(0) scale(1); }
.modal-content{ background:var(--card); padding:18px; width:640px; max-width:100%; max-height:86vh; border-radius:16px; display:flex; flex-direction:column; overflow:hidden; box-shadow: 0 30px 60px rgba(10,18,30,0.2); }
.close{ align-self:flex-end; background:transparent; border:none; font-size:22px; cursor:pointer; color:var(--text); padding:6px 8px; border-radius:10px; }
.close:hover{ background: rgba(43,123,228,0.03); }

/* history styling */
.history-list{ flex:1; overflow-y:auto; padding-right:6px; }
.history-item{ margin-bottom:12px; border-radius:12px; background: var(--card); border:1px solid var(--border); box-shadow: 0 6px 12px rgba(10,20,40,0.03); overflow:hidden; }
.history-header{ cursor:pointer; padding:12px 14px; font-weight:700; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px 12px 0 0; transition:background 160ms ease; }
.history-body{ max-height:0; overflow:hidden; transition:max-height 320ms ease, padding 260ms ease; padding:0 12px; background:var(--card); }
.history-body.open{ padding:12px; overflow-y:auto; }
.history-body pre{ background:transparent; padding:8px; border-radius:6px; white-space:pre-wrap; word-break:break-word; max-height:220px; overflow:auto; font-family:var(--mono); font-size:13px; }

/* focus outline */
:focus:not(:focus-visible){ outline:none; }
:focus-visible{ outline: 3px solid rgba(43,123,228,0.18); outline-offset:4px; border-radius:8px; }

/* responsive */
@media (max-width:920px){
  body{ padding:18px; }
  .panel{ padding:14px; }
  .header-controls{ gap:6px; }
  .palette-popover{ right:8px; }
  .input-block textarea{ min-height:180px; }
  .output-block textarea{ min-height:180px; }
  .controls-right{ flex-wrap:wrap; gap:8px; }
  .badge{ display:none; }
}

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after { animation-duration:1ms !important; animation-iteration-count:1 !important; transition-duration:1ms !important; scroll-behavior:auto !important; }
}

